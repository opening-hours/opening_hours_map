<html xml:lang="de"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:cal="http://www.w3.org/2002/12/cal/ical#"
	xmlns:cc="http://creativecommons.org/ns#"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:xsd="http://www.w3.org/2001/XMLSchema"
>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Auswertung des Tags opening_hours auf einer Karte von OpenStreetMap</title>
<meta name="description" content="Auswertung des Tags opening_hours auf einer Karte von OpenStreetMap" />
<link rel="stylesheet" href="opening_hours.js/css/table.css"/>
<script type="text/javascript">
/*<![CDATA[*/
var repo_url = 'https://github.com/ypid/opening_hours_map';
var html_url = 'http://robin.de.marissa.hostorama.ch/osm/opening_hours_map/opening_hours_map.html';
var wiki_url = 'http://wiki.openstreetmap.org/wiki/Key:opening_hours';
var map;

if (!document.onLoadFunctions) {
	document.onLoadFunctions = new Array();
	window.onload = function () { for (var i=0; document.onLoadFunctions.length>i;i++) document.onLoadFunctions[i](); }
}

var poi_layer;

var permalinkParams={};
var permalinkObject;

function Evaluate(number, reset, value) {
	window.open('http://robin.de.marissa.hostorama.ch/osm/opening_hours.js/demo.html' + '?EXP='+encodeURIComponent(value),'_blank');
}

// from https://github.com/rurseekatze/OpenLinkMap/blob/master/js/small.js
function editPopupContent(content, lat, lon, type, id, oh_value) {
	var short_type = type.substr(0, 1);
	// add some links to the bottom of a popup
	content += '<br />';
	content += '<a href="http://www.openstreetmap.org/edit?editor=id&'+short_type+'='+id+'" target="_blank">iD</a>&nbsp;&nbsp;';
	content +=
		'<a href="http://www.openstreetmap.org/edit?'+short_type+'='+id+'&editor=potlatch2" target="_blank">Potlatch</a>'+
		'&nbsp;&nbsp;<a href="javascript:josm(\'import?url=' + encodeURIComponent('http://overpass-api.de/api/xapi_meta?*[opening_hours=' + oh_value + ']') + '\')">JOSM all with this value</a>'+
		'&nbsp;&nbsp;<a href="javascript:josm(\'load_object?objects=' + short_type + id + '&select=' + short_type + id + '\')">JOSM</a>'+
		'&nbsp;&nbsp;<a href="http://www.openstreetmap.org/browse/'+type+'/'+id+'" target="_blank">Details</a>'
		+ '&nbsp;&nbsp;<a href="http://robin.de.marissa.hostorama.ch/osm/opening_hours.js/demo.html?EXP='
		+ encodeURIComponent(oh_value) + '&lat=' + lat + '&lon=' + lon + '" target="_blank">Test opening_hours</a>';
	return content;
}

// Using a different way to than https://github.com/rurseekatze/OpenLinkMap/blob/master/js/small.js
// prevent josm remote plugin of showing message
// FIXME: Warning in console. Encoding stuff.
function josm(url_param) {
	top.hiddenframe.location.href = 'http://localhost:8111/' + url_param;
}

var tmp = 0;
var tags_to_mode = {
	'opening_hours'        : [ 0, tmp++ ], // [ mode, selectedIndex, options hash from real_test ]
	'collection_times'     : [ 2, tmp++ ],
	'lit'                  : [ 0, tmp++,
		{
			map: {
				'yes'      : 'sunset-sunrise open "specified as yes"',
				'no'       : 'closed "specified as no"',
				'automatic': 'unknown "specified as automatic"',
				'interval' : 'unknown "specified as interval"',
				'limited'  : 'unknown "specified as limited"',
			}
		}
	],
	// 'opening_hours:*'   : [ 0, tmp++ ],
	// '*:opening_hours'   : [ 0, tmp++ ],
	// '*:opening_hours:*' : [ 0, tmp++ ],
	'smoking_hours'        : [ 0, tmp++ ],
	'service_times'        : [ 2, tmp++ ],
}

document.onLoadFunctions.push ( function () {

	window.useUserKey = function (key) {
		if (typeof tags_to_mode[key] != 'object') { // add new key
			var select = document.getElementById('tagselector_input');
			tags_to_mode[key] = [ OHMode, select.options.length ];
			select.options[select.options.length] = new Option(key, select.options.length);
		}
		document.getElementById('tagselector_input').selectedIndex = tags_to_mode[key][1];
	};

	window.keyChanged = function() {
		poi_layer.reloadPOIs();
		permalinkObject.updateLink();
	};

	var OHMode = 0;
	var OSM_tags = []; // keys for the values which should be evaluated.

	var prmarr = window.location.search.replace( "?", "" ).split("&");
	var params = {};
	for ( var i = 0; i < prmarr.length; i++) {
		var tmparr = prmarr[i].split("=");
		params[tmparr[0]] = tmparr[1];
	}

	if (typeof params['mode'] != 'undefined')
		OHMode = parseInt(params['mode']);

	if (typeof params['tags'] != 'string') {
		switch (OHMode) {
			case 2:  OSM_tags.push('collection_times'); break;
			default: OSM_tags.push('opening_hours')   ; break;
		}
	} else {
		OSM_tags.push(params['tags']);
		if (typeof params['mode'] == 'undefined' && typeof tags_to_mode[OSM_tags[0]] != 'undefined')
			OHMode = tags_to_mode[OSM_tags[0]][0];
	}

	if (typeof tags_to_mode[OSM_tags[0]] != 'undefined') {
		document.getElementById('tagselector_input').selectedIndex = tags_to_mode[OSM_tags[0]][1];
	} else {
		useUserKey(OSM_tags[0]);
	}

//----------------------------------------------------------------------------
//	Karte - der Name ('map') muss mit der id des <div> uebereinstimmen.
//----------------------------------------------------------------------------

map = new OpenLayers.Map ('map', {controls:[]});

//----------------------------------------------------------------------------
//	Default-Koordinatensystem fuer alle Controls
//----------------------------------------------------------------------------

map.displayProjection = new OpenLayers.Projection ('EPSG:4326');

//----------------------------------------------------------------------------
//	Patch
//----------------------------------------------------------------------------

OpenLayers.Control.Permalink.prototype.updateLink = function() {

	permalinkObject = this;
	var href=this.base;
	if(href.indexOf('?')!=-1){
		href=href.substring(0,href.indexOf('?'));
	}
	href+='?'+OpenLayers.Util.getParameterString(OpenLayers.Util.extend(this.createParams(), permalinkParams));
	this.element.href=href;
};

//----------------------------------------------------------------------------
//	Steuerelemente
//----------------------------------------------------------------------------

map.addControl (new OpenLayers.Control.LayerSwitcher());
map.addControl (new OpenLayers.Control.LoadStatus(
	{html: '<img src="img/ajax-loader.gif" /><br />${layers}'}
));
map.addControl (new OpenLayers.Control.MousePosition());
map.addControl (new OpenLayers.Control.Navigation());
map.addControl (new OpenLayers.Control.PanZoomBar());
map.addControl (new OpenLayers.Control.Permalink());
map.addControl (new OpenLayers.Control.ZoomStatus(
{html: 'Die Marker werden erst auf Zoom Stufe ${next} geladen. Aktuelle Zoom Stufe ist ${actual}.'}));
map.addControl(new OpenLayers.Control.Attribution());

//----------------------------------------------------------------------------
//	Kartenlayer
//----------------------------------------------------------------------------

map.addLayer (new OpenLayers.Layer.OSM.Mapnik('Mapnik'));
map.addLayer (new OpenLayers.Layer.OSM.CycleMap('CycleMap'));

//----------------------------------------------------------------------------
//**	JSONP-POI-Layer
//----------------------------------------------------------------------------

map.addLayer (poi_layer = new OpenLayers.Layer.PopupMarker ('opening hours like values (opening_hours, lit, …)', {

	//------------------------------------------------------------
	//	blocksize=0 deaktiviert das Cachen von Markern.
	//------------------------------------------------------------

	blockSize: 0,

	//------------------------------------------------------------
	//	Marker in allen Zoomstufen darstellen
	//------------------------------------------------------------

	minZoom: 0,

	//------------------------------------------------------------
	//	JOSM&Co Links anzeigen
	//------------------------------------------------------------

	osmlinks: true,
	reftime: new Date(),

	createHtmlFromData: function (data) {

		var h_icon = '<img src="' + this.getIconUrl(data) + '" alt=""/>';
		var h_name = this.html(data.name||data.ref||data.operator||data.shop||data.amenity||data.id);

		var text = '<h3>'+h_icon+'&#160;'+h_name+'</h3>\n';
		text += '<div class="v">'+this.html(data._oh_value)+'</div>';

		this.evaluateOH(data);
			if (data._oh_state == 'error' || data._oh_state == 'na') {
				text += '<div class="e">'+data._oh_object+'</div>';
			} else {
					var t= data._it_object.getComment() || '';

					switch (data._it_object.getStateString(true)) {
					case 'open':	text+='<b class="o">open @ '+this.reftime.toLocaleString()+'<br/>'+t+'</b>'; break;
					case 'closed':	text+='<b class="c">closed @ '+this.reftime.toLocaleString()+'<br/>'+t+'</b>'; break;
					case 'unknown':	text+='<b class="u">unknown @ '+this.reftime.toLocaleString()+'<br/>'+t+'</b>'; break;
					}

				var prettified = data._oh_object.prettifyValue();

				if (data._oh_value != prettified)
					text += '<br/>' + i18n.t('texts.prettified value') + ': <div class="v">'+prettified+'</div>';

				var warnings = data._oh_object.getWarnings();
				if (warnings.length > 0)
					text += '<br/>Warnings: <div class="v">'+warnings.join('<br/>\n')+'</div>';

				data._it_object.setDate(this.reftime);
				text += OpeningHoursTable.drawTableAndComments(data._oh_object, data._it_object, encodeURIComponent(data._oh_value));

				// if (!data._time.value && data._time.times.length>=1)
				// text+='<div class="o">will open @ '+data._time.times[0].t.toLocaleString()+
				// 	(data._time.times[0].c? ' ('+data._time.times[0].c+')' : '') + '</div>';

				// if (data._time.warnings) text+='<div class="m">'+data._time.warnings.join('<br/>')+'</div>';
			}

			var rows=[];
			for (var tag in data) {
				if (data[tag] == '') continue;
				switch (tag) {
				case 'id': case '_id': case 'lat': case 'lon': case 'name': case 'created_by':
				case '_oh_value': case '_oh_state': case '_oh_object': case '_it_object':
					continue;
				}
				val=this.html(data[tag]);
				if (val.substr(0,7)=='http://') {
					var res = [];
					var list=data[tag].split (';');
					for (var i=0; i<list.length;i++) {
						var ele=this.html(OpenLayers.String.trim(list[i]));
						res.push ('<a target="_blank" href="' + ele+'">'+ele+'</a>');
					}
					val=res.join('; ');
				}
				rows.push ('<tr><td>'+this.html(tag)+':</td><td>'+val+'</td></tr>');
			}

			if (rows.length>=1) text += '<table>'+rows.join('\n')+'</table>\n';

			return editPopupContent(text, data.lat, data.lon, data._type, data._id, data._oh_value);
		},

		//------------------------------------------------------------
		//	Icons
		//------------------------------------------------------------

		createIconFromData: function (data) {
			return new OpenLayers.Icon(this.getIconUrl(data));
		},

		getIconUrl: function (data) {
			if (this.evaluateOH(data) != 'na') {
				var oh = data._oh_object;
				switch (data._oh_state) {
				case 'ok': case 'warning': return 'img/circle_' + (oh.getState() ? 'green' : (oh.getUnknown() ? 'yellow' : 'red'))
					   + (data._oh_state == 'warning' ? '_warn' : '') + '.png';
				case 'error':   return 'img/circle_err.png';
				default: return false;
				}
			}
		},

		//------------------------------------------------------------
		//	Welche POIs laden?
		//------------------------------------------------------------

		keyValues: [
		],

		//------------------------------------------------------------
		//	Nach pan oder zoom: POIs neuladen.
		//------------------------------------------------------------

		moveTo: function (bounds, zoomChanged, dragging) {

			OpenLayers.Layer.Markers.prototype.moveTo.apply(this,arguments);

			if (dragging || !this.visibility || this.map.zoom<this.minZoom) return;

			this.reloadPOIs();
		},

		//------------------------------------------------------------
		//	POIs neuladen.
		//	Muss nach Ändern von keyValues augerufen werden.
		//------------------------------------------------------------

		reloadPOIs: function () {

			if (this.updateKeyValues) this.updateKeyValues();

			var xml = this.overpassXML (this.keyValues);
			var url = 'http://overpass-api.de/api/interpreter?jsonp=#&data=' + encodeURIComponent(xml);
			this.jsonpRequest (url, this, this.jsonCallback);
		},

		//------------------------------------------------------------
		//	Baue aus der keyValues eine overpass-Anfrage.
		//------------------------------------------------------------

		overpassXML: function (keyvalues) {

			if (!(keyvalues instanceof Array)) keyvalues = [keyvalues];

			var bbox = this.map.getExtent().
				transform(this.map.getProjectionObject(),this.map.displayProjection);

			var bboxQuery = OpenLayers.String.format (
				'<bbox-query s="${bottom}" n="${top}" w="${left}" e="${right}"/>',
				bbox);

			var components = [];
			for (var i in keyvalues) {
				var key = keyvalues[i];
				var kvlist = [];
				kvlist.push ("<has-kv");
				if (key) kvlist.push ('k="' + this.html(key) + '"');
				// if (value) kvlist.push ('v="' + this.html(value) + '"');
				kvlist.push ("/>");
				components.push('<query type="node">' + bboxQuery + kvlist.join(' ') + '</query>');
				components.push('<query type="way">'  + bboxQuery + kvlist.join(' ') + '</query>');
			}

			var xml = '<osm-script output="json"><union>' + components.join('') + '</union><print/></osm-script>';

			return xml;
		},

		evaluateOH: function (data) {
			if (typeof data._oh_value == 'undefined' && typeof data._oh_state == 'undefined') {
				for (var i=0; i < OSM_tags.length; i++) {
					if (typeof data[OSM_tags[i]] == 'string') {
						data._oh_value = data[OSM_tags[i]];
						if (typeof tags_to_mode[OSM_tags[i]] == 'object'
							&& typeof tags_to_mode[OSM_tags[i]][2] == 'object'
							&& typeof tags_to_mode[OSM_tags[i]][2].map == 'object') {
								var map = tags_to_mode[OSM_tags[i]][2].map;
								console.log("value", map[data._oh_value], data._oh_value);
								console.log(JSON.stringify(map, null, '\t'));
								if (typeof map[data._oh_value] == 'string')
									data._oh_value = map[data._oh_value];
						}
						break;
					}
				}
				if (typeof data._oh_value == 'undefined') {
					data._oh_value == false;
					data._oh_state = 'na'; // not applicable
					return data._oh_state;
				}

				var crashed = true;
				try {
					var oh = new opening_hours(data._oh_value, this.nominatim, OHMode);
					var it = oh.getIterator(this.reftime);
					crashed = false;
				} catch (err) {
					crashed = err;
					data._oh_object = crashed;
					data._oh_state = 'error';
				}

				if (!crashed) {
					data._oh_object = oh;
					data._it_object = it;
					if (oh.getWarnings().length > 0) {
						data._oh_state = 'warning';
					} else {
						data._oh_state = 'ok';
					}
				}
				return data._oh_state;
			}
		},


		lastLat: undefined,
		lastLon: undefined,
		nominatim: undefined,
		url_lang: 'de',

		//------------------------------------------------------------
		//	Callback-Funktion für JSONP:
		//	Löscht die bestehenden POIs und trägt die neuen ein.
		//------------------------------------------------------------

		createMarkerFromData: function(elements) {
		},

		jsonCallback: function (data) {

			var elements = data.elements;
			if (!elements) {
				alert ('Missing "elements" in overpassXML json data.');
				return;
			}
			this.erase (true);

			var nominatim;
			if (typeof elements[0] != 'undefined' && (typeof this.lastLat == 'undefined'
				|| Math.abs(this.lastLat - elements[0].lat) > 2
				|| Math.abs(this.lastLon - elements[0].lon) > 2)) {
				var url = 'http://open.mapquestapi.com/nominatim/v1/reverse.php';
				url += '?format=json&osm_type=' + elements[0].type.substr(0,1).toUpperCase() + '&osm_id=' + elements[0].id
					+ '&zoom=5&addressdetails=1&email=ypid23@aol.de';
				var url_lang_set = 'accept-language=';

				var xhr = new XMLHttpRequest();
				xhr.open( "GET", url + '&' + url_lang_set + this.url_lang, false );      // true makes this call asynchronous
				xhr.onreadystatechange = function () {    // need eventhandler since our call is async
					if ( xhr.readyState == 4 && xhr.status == 200 ) {  // check for success
						nominatim = JSON.parse( xhr.responseText );

						// console.log(JSON.stringify(this.nominatim, null, '\t'));
						if (this.nominatim.address.country_code != this.url_lang) {
							xhr.open( "GET", url + '&' + url_lang_set + this.nominatim.address.country_code, false );
							xhr.onreadystatechange = function () {
								if ( xhr.readyState == 4 && xhr.status == 200 ) {  // check for success
									nominatim = JSON.parse( xhr.responseText );
								}
								this.url_lang = this.nominatim.address.country_code;
							}
							xhr.send(null);
						}
					}
				};
				xhr.send(null);
				this.nominatim = nominatim;

				this.lastLat = elements[0].lat;
				this.lastLon = elements[0].lon;
			}

			for (var i in elements) {
				var element = elements[i];
				var data = element.tags;
				if (!data) data = {};
				if (element.id) {
					data.id = (element.type ? element.type.substr(0,1) : '') + element.id;
					data._id = element.id;
				}
				if (element.type) data._type = element.type;
				data.lat = element.lat;
				data.lon = element.lon;
				this.createMarker (data);
			}

		},

		//------------------------------------------------------------
		//	Update keyValues
		//------------------------------------------------------------
		updateKeyValues: function () {
			for (var key in tags_to_mode) {
				if (tags_to_mode[key][1] == document.getElementById('tagselector_input').selectedIndex) {
					this.keyValues = [ key ];
					if (typeof tags_to_mode[key] != 'undefined')
						OHMode = tags_to_mode[key][0];
					OSM_tags = [ key ];
					permalinkParams.tags = key;
					break;
				}
			}
		},

		filter: OpenLayers.Util.getParameters().filter=='error' ? function (data) {
				return this.evaluateOH(data) == 'error' || data._oh_object.getWarnings().length > 0;
			} : OpenLayers.Util.getParameters().filter=='errorOnly' ? function (data) {
				return this.evaluateOH(data) == 'error';
			} : OpenLayers.Util.getParameters().filter=='warnOnly' ? function (data) {
				return this.evaluateOH(data) != 'error' && data._oh_object.getWarnings().length > 0;
			} : OpenLayers.Util.getParameters().filter=='open' ? function (data) {
				if (this.evaluateOH(data) == 'error')
					return false;
				else
					return data._it_object.getState();
			} : OpenLayers.Util.getParameters().filter=='unknown' ? function (data) {
				if (this.evaluateOH(data) == 'error')
					return false;
				else
					return data._it_object.getUnknown();
			} : OpenLayers.Util.getParameters().filter=='OpenOrUnknown' ? function (data) {
				if (this.evaluateOH(data) == 'error')
					return false;
				else
					return data._it_object.getState() || data._it_object.getUnknown();
			} : null,

		minZoom: 11,
		blockSize: 0,	// no cache
		clusterSize: 16,
		clusterLimit: 50

	} ));

	//----------------------------------------------------------------------------
	//	Stelle bestimmten Bereich in maximaler Groesse dar
	//----------------------------------------------------------------------------

	if (!map.getCenter()) {
		map.zoomToExtent(
			new OpenLayers.Bounds(7.1042, 50.7362, 7.1171, 50.7417).
		transform(new OpenLayers.Projection('EPSG:4326'), map.getProjectionObject()));
	}

	document.getElementById('tagselector_input').onchange = keyChanged;

});
/*]]>*/</script>
<script type="text/javascript" src="js/OpenLayers-2.13.1/OpenLayers.js"></script>
<script type="text/javascript" src="js/OpenStreetMap.js"></script>
<script type="text/javascript" src="js/popupmarker.js"></script>
<script type="text/javascript" src="js/loadstatus.js"></script>
<script type="text/javascript" src="js/zoomstatus.js"></script>
<script type="text/javascript" src="opening_hours.js/js/suncalc/suncalc.js"></script>
<script type="text/javascript" src="opening_hours.js/opening_hours.js"></script>
<script type="text/javascript" src="opening_hours.js/js/i18next-1.6.3.min.js"></script>
<script type="text/javascript" src="opening_hours.js/js/i18n-resources.js"></script>
<script type="text/javascript" src="opening_hours.js/js/opening_hours_table.js"></script>
<style type="text/css">
.olMap {
	color: black;
}

.olMap a {
	background: transparent;
	color: blue;
	text-decoration: none;
}

.olControlAttribution {
	bottom: 0.1em !important;
	left: 0.1em;
	right: auto !important;
}

.olControlLoadStatus {
	left: 50px;
	top: 10px;
}

.olControlMaplink {
	right: 0.1em;
	font-size: smaller;
}

#ml1 {
	bottom: 4.2em;
}

#ml2 {
	bottom: 3.0em;
}

.olControlMousePosition {
	background: white;
	bottom: 0.1em;
	font-family: Monospace;
	opacity: 0.7;
	right: 0.1em;
}

.olControlZoomstatus {
	bottom: 1.5em;
	left: 0px;
	background: white;
	opacity: 0.7;
}

/* .olFramedCloudPopupContent { */
/* 	max-height: 400px; */
/* } */
/*  */
/* .olFramedCloudPopupContent, */
/* .olFramedCloudPopupContent table { */
/* 	color: black; */
/* } */

.olFramedCloudPopupContent h3 {
	font-size: 120%;
	font-weight: bold;
	margin: 0;
}

.olFramedCloudPopupContent h3 img {
	height: 16px;
	width: 16px;
}

/* .olFramedCloudPopupContent td { */
/* 	background: transparent; */
/* 	margin: 0; */
/* 	padding: 0; */
/* } */
/*  */
/* .olFramedCloudPopupContent p { */
/* 	font-size: xx-small; */
/* 	margin: 0 0 1em; */
/* 	text-align: right; */
/* } */

.olFramedCloudPopupContent hr {
	display: none;
}

.olFramedCloudPopupContent .v {
	color:black;
	background: #dddddd;
	border: 1px solid gray;
	font-family: Monospace;
}

.olFramedCloudPopupContent .e {
	background: red;
	color: white;
	font-weight: bold;
	padding: 2px;
}

.olFramedCloudPopupContent .m {
	background: gray;
	color: white;
	font-weight: bold;
	padding: 2px;
}

.olFramedCloudPopupContent .o {
	color: blue;
}

.olFramedCloudPopupContent .c {
	color: gray;
}

.olFramedCloudPopupContent .u {
	color: red;
}

.olFramedCloudPopupContent .t {
	color: red;
}

#map {
	background: gray;
	height:100%;
	width:100%;
}

@media print {
	.olControlMousePosition,
	.olControlPanZoomBar,
	.olControlPermalink,
	.olControlZoomstatus {
		display: none !important;
	}
}

</style>

</head>

<body>
<div id="map"></div>
<iframe style="visibility:hidden;display:none" name='hiddenframe'></iframe>

<script type="text/javascript">
	document.write('<h1>' + i18n.t('texts.heading map') + '</h1>');
</script>
<script type="text/javascript">
	document.write(getUserSelectTranslateHTMLCode());
</script>

<script type="text/javascript">
function submitenter(myfield,e) {
	var keycode;
	if (window.event) keycode = window.event.keyCode;
	else if (e) keycode = e.which;
	else return true;

	if (keycode == 13) {
		useUserKey(document.getElementById(myfield.id).value);
		keyChanged();
		return false;
	} else
		return true;
}
</script>

<div id="tagselector">
	<script type="text/javascript">
		document.write('<strong>' + i18n.t('texts.config POIs') + '</strong>:');
	</script>
	<select id="tagselector_input" name="tagselector_input">
		<script type="text/javascript">
			for (var tag in tags_to_mode) {
				document.write('<option value="' + tags_to_mode[tag][1] + '">' + tag + '</option>');
			}
		</script>
	</select>
	<form id="userKey" action="">
	<input id="key" style="width:20%" name="key" onKeyPress="return submitenter(this,event)" />
	</form>
</div>

<!-- <li>Blaugelb: <q>24/7 geöffnet</q>,</li> -->
<!-- <li>Graublau: <q>geschlossen, öffnet aber heute noch</q>,</li> -->
<!-- <li>Grau: <q>geschlossen, öffnet heute nicht mehr</q>,</li> -->
<script type="text/javascript">
	document.write('<p>');
	document.write(i18n.t('texts.map is showing', { mapUrl: html_url, wikiUrl: wiki_url }));
	document.write('<ul>');
	document.write('<li>' + i18n.t('words.green')  + ': ' + i18n.t('texts.open now') + '</li>');
	document.write('<li>' + i18n.t('words.yellow') + ': ' + i18n.t('texts.unknown now') + '</li>');
	document.write('<li>' + i18n.t('words.red')    + ': ' + i18n.t('texts.closed now') + '</li>');
	document.write('<li>' + i18n.t('words.violet')    + ': ' + i18n.t('texts.error') + '</li>');
	document.write('</ul>');
	document.write(i18n.t('texts.warning', { sign: '<q>W</q>' }));
	document.write('</p><p>');
	document.write(i18n.t('texts.map filter'));
	document.write('<ul>');
	document.write('<li>' + '<a href="' + html_url + '?filter=error">' + i18n.t('texts.warn error') + '</a></li>');
	document.write('<li>' + '<a href="' + html_url + '?filter=warnOnly">' + i18n.t('texts.warnings only') + '</a></li>');
	document.write('<li>' + '<a href="' + html_url + '?filter=errorOnly">' + i18n.t('texts.error only') + '</a></li>');
	document.write('<li>' + '<a href="' + html_url + '?filter=open">' + i18n.t('texts.facilitiy which is open now') + '</a></li>');
	document.write('<li>' + '<a href="' + html_url + '?filter=closed">' + i18n.t('texts.facilitiy which is closed now') + '</a></li>');
	document.write('<li>' + '<a href="' + html_url + '?filter=unknown">' + i18n.t('texts.facilitiy which is unknown now') + '</a></li>');
	document.write('<li>' + '<a href="' + html_url + '?filter=OpenOrUnknown">' + i18n.t('texts.facilitiy which is open/unknown now') + '</a></li>');
	document.write('</ul>');
	document.write('</p><p>');
	document.write(i18n.t('texts.data source', { APIaTag: '<a href="http://overpass-api.de/">Overpass API</a>', OSMaTag: '<a href="http://www.openstreetmap.org/copyright">© OpenStreetMap contributors</a>' }) + '<br />');
	document.write(i18n.t('texts.this website', { url: repo_url, hoster: 'GitHub' }));
	document.write('</p>');
</script>

</body>
</html>
